<div class="d-flex flex-column align-items-center grow">
  <app-search-form (queryParams)="createQueryParams($event)"></app-search-form>
  <div class="table-responsive-lg" style="width: 80%;">
    <table 
    class="container" 
    style="min-width: 600px ;margin: 2% auto 0; height: 800px;display: flex; flex-direction: column;" 
    *ngIf="!isLoading && !isError">
      <div class="row head">
          <div class="col">
            #
          </div>
          <div class="col">
            ID
          </div>
          <div class="col">
            Imię
          </div>
          <div class="col">
            Nazwisko
          </div>
          <div class="col">
            Numer tef.
          </div>
          <div class="col">
            Premium
          </div>
          <div class="col">
            Premium Wygasa
          </div>
          <div class="col">
            Data Rejestracji
          </div>
          <div class="col">
            Role
          </div>
      </div>
        <div *ngFor="let data of datas" class="row body">
          <div class="col">
            <button 
            *ngIf="!isDeleteSellerLoading; else deleteSellerLoading"
            (click)="deleteUser(data.id)"
            type="button" 
            class="btn btn-danger"
            >X</button>
            <ng-template #deleteSellerLoading>
              <button class="btn btn-danger" type="button" disabled>
                <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                <span class="sr-only">Loading...</span>
              </button>
            </ng-template>
          </div>
          <div class="col">
            {{data.id}}
          </div>
          <div class="col">
            <a class="alert-link" 
            [routerLink]="['/user-page', 'user-data']" 
            [queryParams]="{userId: data.id}"
            routerLinkActive="active" >
              {{data.firstName | upperCaseFirstLetter}}
            </a>
          </div>
          <div class="col">
            {{data.lastName | upperCaseFirstLetter}}
          </div>
          <div class="col">
            {{data.phoneNumber}}
          </div>
          <div class="col">
            {{data.isPremium}}
          </div>
          <div class="col">
            {{data.premiumAccount}}
          </div>
          <div class="col">
            {{data.createAccount}}
          </div>
          <div class="col">
            <select 
            class="custom-select input-min" 
            aria-label="type" 
            id="type" 
            aria-describedat="type"
            [value]="data.type"
            #mySelect
            (change)="onTypeChange($event.target.value, data.authId, data.id)"
            *ngIf="!isLoading && !isError" >
              <option
              *ngFor="let type of accountsTypes"
               [value]="type"
               [selected]="type === data.type"
               >
               {{type | upperCaseFirstLetter}}
              </option>
            </select>
          </div>
      </div>
    </table>
  </div>
  <div 
  class="alert alert-danger" 
  role="alert"
  *ngIf="isError">
    Coś poszło nie tak <a class="stretched-link text-danger" [routerLink]="['/admin']" [queryParams]="{page: 1, adf: random()}" >spróbuj jeszcze raz</a>
  </div>
  <div 
  class="d-flex align-items-center justify-content-center margin"
  *ngIf="isLoading"
  >
      <app-spinner></app-spinner>
  </div>
  <app-pagination
    [url]="'/admin'"
    [currentPage]="page"
    [maxPage]="maxPage"
    [queryParams]="queryParams"
  ></app-pagination>
</div>
<app-modal
 *ngIf="isDeleteSellerError"
 [isError]="true"
 secondAction="Anuluj"
 (action)="closeErrorModal()"
></app-modal>

