<div class="d-flex justify-content-center top-margin">
    <div class="col-lg-4 col-md-6 border border-primary rounded padding">
        <app-error-message *ngIf="isError"></app-error-message>
        <app-error-message *ngIf="isLoginError" errorMessage="błędny login lub hasło"></app-error-message>
        <h3>Zaloguj się</h3>
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
            <label for="username">Email</label>
            <input type="text" 
            class="form-control" 
            [ngClass]="{'is-invalid' : 
            !loginForm.get('username').valid && 
            loginForm.get('username').touched,
            'is-valid' : loginForm.get('username').valid}"
            id="username"
            formControlName="username">
            <div class="invalid-feedback"
                *ngIf="loginForm.get('username').errors?.required">
            Pole jest wymagane
            </div>
            <div class="invalid-feedback"
                *ngIf="loginForm.get('username').errors?.minlength">
                E-mail za krótki(minimalnie 3 znaki)
            </div>
            <div class="invalid-feedback"
                *ngIf="loginForm.get('username').errors?.maxlength">
                E-mail za długi(maksymalnie 100 znaków)
            </div>
            <div class="invalid-feedback"
                *ngIf="loginForm.get('username').errors?.email ">
                Niepoprawny email
            </div>
            <div class="invalid-feedback"
            *ngIf="loginForm.get('username').errors?.isusernamenotexisted ">
                Użytkownik o takim addresie email nie istnieje proszę
                <a [routerLink]="['/registration']" class="alert-link">załozyć konto</a>
            </div>
            <div class="invalid-feedback"
                *ngIf="loginForm.get('username').errors?.withoutspace">
                E-mail nie może zawierać spacji
            </div>
            <div class="valid-feedback">
            OK!
            </div>
            <div class="form-group">
                <label for="password">Hasło</label>
                <input type="password" 
                class="form-control"
                [ngClass]="{'is-invalid' : 
                !loginForm.get('password').valid && 
                loginForm.get('password').touched,
                'is-valid' : loginForm.get('password').valid}" 
                id="password"
                formControlName="password">
                <div class="invalid-feedback"
                *ngIf="loginForm.get('password').errors?.required">
                Pole jest wymagane
                </div>
                <div class="invalid-feedback"
                    *ngIf="loginForm.get('password').errors?.minlength">
                    Hasło za krótkie(minimalnie 8 znaki)
                </div>
                <div class="invalid-feedback"
                    *ngIf="loginForm.get('password').errors?.maxlength">
                    Hasło za długie(maksymalnie 40 znaków)
                </div>
                <div class="invalid-feedback"
                    *ngIf="loginForm.get('password').errors?.requiredcapitalletter">
                    Hasło musi zawierać co najmniej jedną dużą literę
                </div>
                <div class="invalid-feedback"
                    *ngIf="loginForm.get('password').errors?.requiredspecialsign">
                    Hasło musi zawierać co najmniej jeden znak specjalny
                </div>
                <div class="invalid-feedback"
                    *ngIf="loginForm.get('password').errors?.requireddigit">
                    Hasło musi zawierać co najmniej jedną cyfrę
                </div>
                <div class="invalid-feedback"
                    *ngIf="loginForm.get('password').errors?.withoutspace">
                    Hasło nie może zawierać spacji
                </div>
                <div class="valid-feedback">
                OK!
                </div>
                <div style="margin-top: 15px;">
                    <a 
                    [routerLink]="['/reset-password']"
                    class="alert-link" 
                    >
                    Zmień hasło 
                    </a>
                </div>
                <button 
                class="btn btn-success top-margin"
                type="submit"
                *ngIf="!isLoading; else loading"
                [disabled]="loginForm.invalid"
                >Zaloguj się</button>
                <ng-template #loading>
                    <button 
                    class="btn btn-success top-margin"
                    ><app-spinner [size]="1"></app-spinner> Wysyłanie...</button>
                </ng-template>
            </div>
        </form>
    </div>
</div>
<div *ngIf="isLoginSuccess">
    <app-modal
    title="Logowanie powiodło się"
    [showAcceptButton]="true"
    [showCancelButton]="false"
    firstAction="Wróć do strony głównej"
    (action)="onLoginSuccess()"
    ></app-modal>
</div>
<app-modal
*ngIf="isShowEnabledModal"
title="Aktywuj konto!"
[showAcceptButton]="false"
[showCancelButton]="true"
secondAction="zamknij"
(action)="onIsNotEnabled()"
></app-modal>